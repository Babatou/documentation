:icons: font

= Android AutoVoice

== Aufgabe

Dieser Artikel soll Ihnen helfen, Android zu benutzen, um mit Jeedom zu sprechen. Wir werden die Jeedom-Interaktions-Engine verwenden, mit der Anfragen formuliert werden und Jeedom darauf reagieren kann (und falls gewünscht, aktivieren Sie verschiedene Szenarien oder Elemente).

== Installation

=== Voraussetzungen

Natürlich benötigen Sie ein Android-Gerät (Tablet, Telefon, PC mit Mikrofon und Lautsprechern) und installieren dort https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm&hl=fr[Tasker] und https://play.google.com/store/apps/details?id=com.joaomgcd.autovoice&hl=fr[AutoVoice].
Auf diese Weise können Sie eigene Sprachbefehle für Google Now erstellen, um Ihre Aufgaben mithilfe von Sprache zu automatisieren.

Hinweis: AutoVoice ist nur die Komponente, die mit Jeedom kommuniziert, erlaubt aber nicht, dass Jeedom antwortet. Damit es das macht, brauchen Sie nicht das Tasker Plugin. Sie können dieses Beispiel auch verwenden, indem Sie die Spracherkennung von AutoVoice durch ein NFC-Tag, eine Ortsbestimmung, eine empfangene SMS ersetzen ...

=== Das Prinzip

Wir werden ein Tasker-Profil mit zuständen verwenden. Dies wird eine Spracherkennung von AutoVoice sein. Dann wird Tasker aufgefordert, 2 Aktionen auszuführen. Die erste wird Jeedom anrufen und das Text-Ergebnis der Spracherkennung senden. Die zweite wird die Rücksendung von Jeedom sein.

== Profil erstellen

Ein neues Profil wird mit einem *Zustand* als Trigger hinzugefügt.

image::../images/android.autovoice1.png[]

Sie wählen *Plugin* auf dem ersten Bildschirm.

image::../images/android.autovoice2.png[]

Im Plugin-Typ wählen Sie *AutoVoice*.

image::../images/android.autovoice3.png[]

Wählen Sie im Untermenü *AutoVoice* *Recognized*.

image::../images/android.autovoice4.png[]

Sie können die Standardkonfiguration speichern, es sei denn, Sie möchten Schlüsselwörter oder andere Parameter angeben.

image::../images/android.autovoice5.png[]

Sie können dem Profil einen Namen wie "Jeedom Interaktion" geben und das Backup wird nach der Verknüpfung mit einer Aufgabe durchgeführt.

== Die Aufgabe

Fügen Sie dem neu erstellten Profil eine *neue Aufgabe* hinzu. Zum Beispiel könnte es "Jeedom API" genannt werden.

image::../images/android.autovoice6.png[]

Die Aufgabe enthält schließlich 2 Aktionen : *API-Aufruf* und *zurück sagen".

image::../images/android.autovoice7.png[]

Zuerst fügen Sie eine Aktion vom Typ *Netzwerk* hinzu.

image::../images/android.autovoice8.png[]

Dann wählen Sie *Get HTTP*.

image::../images/android.autovoice9.png[]

Dort werden Sie Jeedom mit Daten füllen.
Hier sind die Daten, die eingegeben werden müssen: 

* Server:Port : `https://mondomain.tld`
* Pfad : /jeedom/core/api/jeeApi.php?apikey=votreclef&type=interact&query=%avcommnofilter&utf8=1`

Vergessen Sie nicht, Ihren API-Schlüssel anstelle der Zeichenkette 'Votreclef' einzugeben. Sie müssen am Ende `%avcommonfilter` belassen, dieses wird durch die Rückgabe von AutoVoice ersetzt.

image::../images/android.autovoice10.png[]

Fügen Sie eine Aktion vom Typ *Sprechen* hinzu. Filtern Sie dazu die Aktionen, indem Sie "Sprechen" in die Lupe eingeben.

image::../images/android.autovoice11.png[]

Und Sie geben `%HTTPD` in das Textfeld ein.

image::../images/android.autovoice12.png[]

Und fertig. Bei der Texterkennung durch AutoVoice wird Jeedom angerufen und Sie haben die Antwort in den Interaktionen konfiguriert, die von Ihrem Telefon gesprochen werden. Vergessen Sie nicht, die Jeedom Interaktionen zu konfigurieren und Sie können es fragen, was Sie wollen. Von "wie ist die Temperatur des Wohnzimmers" bis "schalte das Wohnzimmerlicht an".

[TIP]
Wenn das nicht von Anfang an funktioniert, liegt es oft daran, dass AutoVoice nicht aktiv ist.
Klicken Sie dazu auf Google Now Integration und auf die erste Option oben und autorisieren Sie AutoVoice.

[TIP]
Standardmäßig deaktiviert AutoVoice die Google Now-Suche. Es ist möglich, dieses Verhalten rückgängig zu machen. Klicken Sie dazu in Tasker auf Ihr Profil, dann auf "edition" (kleiner Stift), dann auf "advanced" (ganz unten) und deaktivieren Sie "Do Google Now Search" (ganz unten).